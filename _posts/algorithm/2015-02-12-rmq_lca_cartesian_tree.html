---
title: RMQ与LCA之间的转换
author: He Tao
date: 2015-02-12
tag: Algorithm
category: Algorithm
layout: post
---

<p>RMQ(Range Maximum/Minimum Query) 和 LCA(Least Common Ancestor) 问题是关联度十分高的两类问题。既可以把LCA问题转化为RMQ问题，也可以把RMQ问题转换为LCA问题。本文主要探讨如何通过笛卡尔树(Cartesian Tree)来建立起这两类问题之间的联系。</p>
<h2 id="笛卡尔树的特点">笛卡尔树的特点</h2>
<p>笛卡尔树的特点如下：</p>
<ul>
<li>每一个节点的值都是该节点极其子树的最小值。</li>
</ul>
<!--more-->
<h2 id="笛卡尔树的构造">笛卡尔树的构造</h2>
<p>有笛卡尔树的特点，不难想到其构造算法如下：</p>
<ol style="list-style-type: decimal">
<li>从左到右遍历数组；</li>
<li>把第一个值作为最初的根节点；</li>
<li>随后每一个值都从根节点出发，一直向右走，知道找到第一个比该值小的节点；</li>
<li>把这个值放在找到的节点处，原来该位置的节点作为这个值的左子节点。</li>
</ol>
<p>示例：</p>
<p>数组：</p>
<pre><code>[10, 25, 22, 34, 7, 19, 9, 12]</code></pre>
<p>加入第一个值:</p>
<pre><code>            1(10)</code></pre>
<p>加入第二个值:</p>
<pre><code>            1(10)
                \
                 \
                2(25)</code></pre>
<p>加入第三个值:</p>
<pre><code>            1(10)
                \
                 \
                3(22)
                /
               /
            2(25)</code></pre>
<p>加入第四个值:</p>
<pre><code>            1(10)
                \
                 \
                3(22)
                /  \
               /    \
            2(25)    4(34)</code></pre>
<p>加入第五个值:</p>
<pre><code>                5(7)                
                / 
               /   
            1(10)
                \
                 \
                3(22)
                /  \
               /    \
            2(25)   4(34)</code></pre>
<p>加入第六个值:</p>
<pre><code>                5(7)                
                / \
               /   \
            1(10)   6(19)
                \
                 \
                3(22)
                /  \
               /    \
            2(25)   4(34)</code></pre>
<p>加入第七个值:</p>
<pre><code>                5(7)                
               /   \
              /     \
          1(10)     7(9)
             \     /  
              \   /     
            3(22) 6(19) 
            /   \
           /     \
        2(25)    4(34)</code></pre>
<p>加入第八个值:</p>
<pre><code>                5(7)                
               /   \
              /     \
          1(10)     7(9)
             \     /  \
              \   /    \ 
            3(22) 6(19) 8(12)
            /   \
           /     \
        2(25)    4(34)</code></pre>
