---
title: Scala 入门笔记
author: He Tao
date: 2015-03-28
tag: [Scala]
category: 编程语言
layout: post
---

<p>Scala初学笔记。</p>
<h2 id="hello-world-in-scala">Hello World in Scala</h2>
<p>学习Scala的语法，还是从Hello World开始吧：</p>
<pre class="sourceCode scala"><code class="sourceCode scala"><span class="kw">object</span> HelloWorld {
  <span class="kw">def</span> <span class="fu">main</span>(args: Array[String]) {
    <span class="fu">print</span>(<span class="st">&quot;Hello World, Scala!&quot;</span>)
  }
}</code></pre>
<!--more-->
<p>编译,</p>
<pre><code>scalac HelloWorld.scala</code></pre>
<!--more-->
<p>运行,</p>
<pre><code>scala -classpath . HelloWorld</code></pre>
<p>在控制台输出：</p>
<pre><code>Hello World, Scala!</code></pre>
<p>跟Java挺像！需要<strong>注意</strong>的是，<code>main</code>函数没有返回值(procedure method)。</p>
<p>在Scala中，可以每行写一条语句，行末不用使用<code>;</code>分隔，如果在同一行书写多条语句，语句间需要用<code>;</code>隔开。</p>
<h2 id="interaction-with-java">Interaction with Java</h2>
<p>Scala运行于JVM之上，Scala代码也很容易与Java代码进行交互。Scala中，可以使用<code>import</code>来导入Java的包，<code>java.lang</code>包会默认导入，其他的包需要显式导入。Scala中的<code>import</code>与Java相比有一些语法上的扩展，使得更灵活易用。例如：</p>
<pre><code>import java.lang.{Math, Boolean} // import Math 和 Boolean
import java.lang.Math._ // import java.lang.Math包中的所有内容</code></pre>
<p>Scala与Java进行代码级的交互的例子：</p>
<pre class="sourceCode scala"><code class="sourceCode scala"><span class="kw">import</span> java.<span class="fu">util</span>.{Data, Locale}

<span class="kw">object</span> Main {
  <span class="kw">def</span> <span class="fu">main</span>(args: Array[String]) {
    <span class="kw">val</span> now = <span class="kw">new</span> Date
    <span class="fu">print</span>(now)
  }
}</code></pre>
<p>编译，运行，得到输出：</p>
<pre><code>Thu Mar 26 23:31:14 CST 2015</code></pre>
<h2 id="面向对象特性">面向对象特性</h2>
<p>Scala是一门纯面向对象的语言(a pure object-oritented language)，一切皆对象，(everything is an object)，包括数字、函数等。在这一点上，Scala与Java之间存在差异，Java中区分基本类型与引用类型，例如boolean与Boolean、int与Integer，并且，在Java中，函数不能被当成值来操作。</p>
<p>纯面向对象的一个体现：</p>
<pre><code>1+2*3</code></pre>
<p>等价于：</p>
<pre><code>1.+(2.*(3))</code></pre>
<p>运算符<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>等都是number对象的方法。</p>
<p>Scala中，函数也是对象，可以把函数当成值来传参和作为函数返回值，这也是Scala函数式编程特性的体现。将函数作为参数传递时类似C/C++中的函数指针。如下例：</p>
<pre class="sourceCode scala"><code class="sourceCode scala"><span class="kw">object</span> Main {  

  <span class="kw">def</span> <span class="fu">timer</span>(callback: () =&gt; Unit) : Unit {
    <span class="kw">var</span> cnt = <span class="dv">0</span>       <span class="co">// var表示定义变量</span>
    <span class="kw">while</span>(cnt &lt; <span class="dv">10</span>) {
      Thread sleep <span class="dv">2000</span>
      cnt += <span class="dv">1</span>
      <span class="fu">callback</span>()
    }
  }

  <span class="kw">def</span> <span class="fu">task</span>() : Unit {
    <span class="fu">println</span>(<span class="st">&quot;working...&quot;</span>)
  }

  <span class="kw">def</span> <span class="fu">main</span>(args: Array[String]) : Unit {
    <span class="fu">timer</span>(task)
  }</code></pre>
<p>此处，<code>timer</code>函数进行传递回调函数是，还可以使用匿名函数，写成这样：</p>
<pre class="sourceCode scala"><code class="sourceCode scala">    <span class="fu">timer</span>(() =&gt; Unit {
      <span class="fu">println</span>(<span class="st">&quot;working...&quot;</span>)
    })</code></pre>
<p>面向对象自然少不了类的概念，在Scala中，也是用<code>class</code>关键字来定义类。例如，用Scala定义一个Person类：</p>
<pre class="sourceCode scala"><code class="sourceCode scala"><span class="kw">class</span> Student {
  <span class="kw">private</span> <span class="kw">var</span> id = Int.<span class="fu">MaxValue</span>
  <span class="kw">def</span> <span class="fu">setId</span>(id: Int) {
    
  }
}
<span class="kw">class</span> <span class="fu">Person</span>(id: Integer, name: String) {
}</code></pre>
<p>可以用</p>
<pre><code>var p = new Person(10, &quot;abcd&quot;)</code></pre>
<p>来实例化得到一个Person类的对象p。</p>
<p>同样，在类中也可以定义类的方法和属性，只是在这一点上Scala更多地具有函数式编程的特点。在这一点上，Scala的语法与Haskell的<strong>“绑定”</strong>类似。举例：</p>
<pre class="sourceCode scala"><code class="sourceCode scala"><span class="kw">class</span> <span class="fu">Person</span>(id: Integer, name: String) {
  <span class="kw">def</span> aid = id
  <span class="kw">def</span> aname = name
  <span class="kw">def</span> <span class="fu">getId</span>(pid: Integer) = id
  <span class="kw">def</span> <span class="fu">getName</span>(pname: String) = name
}</code></pre>
<p>实例化类得到对象并调用类的方法，操作(读/写)类的属性：</p>
